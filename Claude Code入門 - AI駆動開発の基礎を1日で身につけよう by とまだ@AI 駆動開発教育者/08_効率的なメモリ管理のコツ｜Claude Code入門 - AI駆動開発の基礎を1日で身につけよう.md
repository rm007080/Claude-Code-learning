---
title: "効率的なメモリ管理のコツ｜Claude Code入門 - AI駆動開発の基礎を1日で身につけよう"
source: "https://zenn.dev/tmasuyama1114/books/claude_code_basic/viewer/memory_and_settings_memory_tips"
author:
  - "[[Zenn]]"
published:
created: 2025-10-21
description:
tags:
  - "clippings"
related:
---
Claude Code のメモリシステムを効率的に管理することは、快適な開発体験に直結します。

実際、コンテキストが大きくなりすぎると、Claude Code の応答精度が下がることがあります。

今までも何度か触れてきた内容もありますが、メモリを効率的に管理して、常に高い精度を保つコツを改めてお伝えします。

## Claude Code のメモリの仕組みを理解しよう

改めて、Claude Code のメモリについて整理しておきましょう。

Claude Code のメモリは、大きな本棚のようなものです。

本棚には限られたスペースがあります。

- 本（情報）を詰め込みすぎると、必要な本が見つけにくくなる
- 古い本が多すぎると、新しい本を置く場所がなくなる
- 整理整頓しないと、どこに何があるか分からなくなる

これはClaude Code も同じです。

**コンテキストウィンドウ** という限られたスペースの中で情報を管理しています。

### コンテキストウィンドウとは？

コンテキストウィンドウの容量は約20万トークンです（執筆時点）。

日本語では約15万文字に相当すると言われています。

これは文庫本1冊分くらいの情報量です。

多いように見えますが、実際の開発では以下がすべて含まれます。

- ユーザーからの指示
- Claude からの返答
- 読み込んだファイル
- 実行したコマンドの結果
- CLAUDE.md の内容

そのため、意外とすぐに一杯になってしまいます。

## トークン消費を抑える5つの基本テクニック

### 1\. タスクが変わったら必ず /clear

最も基本的で重要なテクニックです。

タスクが完全に変わる時は、必ず `/clear` を使いましょう。

```
# ユーザー認証機能を実装
> 認証機能を実装して
[作業完了]

# 別のタスクに移る前に
> /clear

# 新しいタスクを開始
> 検索機能を実装して
```

この方法の効果は次の通りです。

- 無関係な情報がリセットされる
- Claude Code が新しいタスクに集中できる
- トークン消費が最小限になる

### 2\. 長い会話は /compact で要約

同じプロジェクトで作業を続ける場合は、 `/compact` が便利です。

重要な情報だけを残して、不要な部分を圧縮できます。

```
# 2時間作業した後
> /compact

# 特定の内容だけ残したい場合
> /compact 認証機能の実装内容だけ保持して
```

コンテキストウィンドウの整理という意味では `/clear` と `/compact` は似ていますが、以下のように使い分けていきましょう。

- `/clear` → 全く新しいタスクを始める時
- `/compact` → タスクを完了した流れで、また関連する別タスクに取り組む時

### 3\. 短く具体的な指示を心がける

指示の書き方でトークン消費が大きく変わります。

冗長な説明は避けて、要点を簡潔に伝えましょう。

**悪い例（トークンを無駄に消費）** ：

```
> ユーザーがログインできるような機能を作ってほしいんだけど、
メールアドレスとパスワードで認証できるようにして、
あと、パスワードを忘れた時の機能もあったほうがいいと思うし、
ソーシャルログインもできたら便利かもしれないけど、
とりあえず基本的な機能から始めて...
```

**良い例（効率的）** ：

```
> 基本的なログイン機能を実装して。
要件：
- メール/パスワード認証
- JWT使用
- React + TypeScript
```

短く具体的、かつ構造化した指示によってトークンを節約できますし、AI も指示内容を理解しやすくなります。

### 4\. 大きなファイルは必要な部分だけ参照

ファイル全体を読み込むとトークンを大量に消費します。

必要な部分だけを指定して読み込みましょう。

**避けるべき** ：

```
> package-lock.json を確認して
```

**推奨** ：

```
> package.json の dependencies だけ確認して
```

### 5\. Plan Mode で無駄な実行を防ぐ

大きな変更をする前に、Plan Mode で計画を立てます。

これにより、間違った方向に進むことを防げます。

```
# Plan Mode に切り替え
[Shift+Tab を2回]

> データベーススキーマを全面的に見直して

# 計画を確認してから実行
```

計画を先に立てることで、無駄な試行錯誤を避けられ、結果的にコンテキストウィンドウを小さくできます。

## CLAUDE.md の最適なサイズとメンテナンス

### 定期的な見直しポイント

CLAUDE.md は `/init` で更新することが多いかと思いますが、多くの場合は **どんどん追記** され、肥大化していきます。

そのため、定期的に情報の取捨選択を行うなどのメンテナンスが必要です。

以下の項目を週に一度はチェックしてみることをおすすめします。

**1\. 古い情報の削除**

完了したタスクや不要になった情報は削除します。

```markdown
# もう不要な情報
## 2024年12月の実装予定
- ユーザー認証（完了済み）
- 検索機能（完了済み）
```

**2\. 冗長な説明の簡略化**

長い説明は要点だけに絞ります。

**冗長な例** ：

```markdown
このプロジェクトは React を使用しています。
React は Facebook が開発したライブラリで...
```

**簡潔な例** ：

```markdown
技術スタック: React 18, TypeScript, Tailwind CSS
```

**3\. 具体例の整理**

多すぎる例は、パターンで説明します。

**例が多すぎる** ：

```markdown
## APIエンドポイント
- GET /users
- GET /users/:id
- POST /users
- PUT /users/:id
- DELETE /users/:id
[さらに50個のエンドポイント...]
```

**パターンで説明** ：

また、上記の例のように別ドキュメントに切り出し、必要なときだけ参照させる手法も有効です。

## 高度なメモリ管理テクニック

### 階層化ドキュメント戦略

大規模プロジェクトでは、CLAUDE.md を分割して管理します。

この方法により、必要な情報だけを効率的に参照できます。

```
プロジェクトルート/
├── CLAUDE.md           # 最小限の全体概要
├── .claude/
│   ├── architecture.md # アーキテクチャ詳細
│   ├── api-guide.md    # API仕様
│   └── ui-patterns.md  # UIパターン集
```

**使い方の例** ：

```
> アーキテクチャについて .claude/architecture.md を参照して説明して
```

拙著ですが、ドキュメントを細かく分割した実践例を別記事で紹介しているので、興味があればご覧ください。

- [【Claude Code】マネできる！個人開発するときに最初に用意したドキュメント24種と機能要件書を全公開](https://qiita.com/tomada/items/e27292b65f723c4633d9)
- [【Claude Code】指示書が肥大化してきたので観点別に指示を分けて開発効率を改善した話](https://qiita.com/tomada/items/cec7f1eb2a5eb83b91f2)

## まとめ

効率的なメモリ管理は、Claude Code を快適に使うために必須スキルとなっています。

今回学んだ重要なポイントをおさらいしておきましょう。

- **`/clear` と `/compact` を使い分ける**
- **短く具体的な指示** でトークンを節約
- **CLAUDE.md は簡潔に** 保つ
- **定期的なメンテナンス** で精度を維持

これらのテクニックを実践すれば、Claude Code との作業が格段に効率的になるはずです。

最初は難しく感じるかもしれませんが、今回の内容を少しずつでも実践していくことをおすすめします。