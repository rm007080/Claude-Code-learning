---
title: CLAUDE.md によるメモリ管理を習得しよう｜Claude Code入門 - AI駆動開発の基礎を1日で身につけよう
source: https://zenn.dev/tmasuyama1114/books/claude_code_basic/viewer/memory_and_settings_claude_md_memory
author:
  - "[[Zenn]]"
published:
created: 2025-10-21
description:
tags:
  - clippings
related:
aliases:
  - Claude Codeのルートディレクトリ、ホームディレクトリの関係
---
Claude Code には、プロジェクトのルールや設定を永続的に記憶させる仕組みがあります。

それが **CLAUDE.md** です。

この Lesson では、CLAUDE.md を使った効果的なメモリ管理方法を学びます。

## CLAUDE.md の仕組みを理解しよう

CLAUDE.md は、Claude Code がプロジェクトのコンテキストを理解するための「記憶ファイル」です。

プロジェクトで守るべきルールや技術スタックの情報を書いておけば、Claude Code が毎回それを参照してくれます。

AI が相手ですのでルールを確実に守ってくれるとは限らないのですが、毎回指示する手間が省けるので積極的に活用しましょう。

## 3つのレベルのメモリファイル

Claude Code のメモリファイルには、ファイルの配置場所によって優先順位が決まっています。

**1\. プロジェクトルートの CLAUDE.md（最優先）**

```
./CLAUDE.md
```

チーム全体で共有したいプロジェクト固有のルール

**2..claude ディレクトリの CLAUDE.md**

```
./.claude/CLAUDE.md
```

個人的なプロジェクトルール（Git で無視することが多い）

**3\. ホームディレクトリの CLAUDE.md（最低優先）**

```
~/.claude/CLAUDE.md
```

全プロジェクトで共通して使いたい個人ルール

優先順位は上から順番です。

同じ内容が書かれていた場合は、より上位のファイルの内容が優先されます。

「プロジェクトフォルダに近い場所が優先される」と覚えておきましょう。

![[Pasted image 20251031203009.png]]

![[Pasted image 20251031203029.png]]

---
### `./CLAUDE.md` — プロジェクトのルート直下

ドット（`.`）はカレント・ディレクトリを指します。つまり、**現在いるフォルダ**の直下にファイルを置く場合です。

**例**：
``` text
my-project/
├── CLAUDE.md          ← ここ
├── index.js
└── package.json`
```
Claude Codeでコマンドを実行している場所がプロジェクトのルートなら、このパスが該当します。通常、ファイルエクスプローラーで見える場所です。

### `./.claude/CLAUDE.md` — 隠しフォルダ内（プロジェクト局所）

ドット（`.`）で始まるフォルダは**隠しフォルダ**です。`.claude`という隠しフォルダ内にメモリファイルを配置します。

**例**：

``` text
my-project/
├── .claude/           ← 隠しフォルダ
│   └── CLAUDE.md      ← ここ
├── index.js
└── package.json`
```
このパスは**プロジェクト固有**のメモリです。異なるプロジェクトごとに独立したメモリを持つことができます。ファイルエクスプローラーで見たい場合は、隠しファイルの表示設定を有効にする必要があります。

### `~/.claude/CLAUDE.md` — ホームディレクトリの隠しフォルダ

チルダ（`~`）は**ユーザーのホームディレクトリ**を指します。

**例**（Linux/macOS）：

``` text
/home/username/
├── .claude/
│   └── CLAUDE.md      ← ここ
├── .config/
└── Documents/
```

**例**（Windows WSL）：

``` text
/home/username/
├── .claude/
│   └── CLAUDE.md      ← ここ`
```

**例**（Windows PowerShell）：

``` text
C:\Users\username\
├── .claude\
│   └── CLAUDE.md      ← ここ
```

このパスは**ユーザー全体で共有**されます。複数のプロジェクトでClaude Codeを使う場合、すべてのプロジェクトが同じメモリファイルにアクセスします。

## まとめ

|項目|`./CLAUDE.md`|`./.claude/CLAUDE.md`|`~/.claude/CLAUDE.md`|
|---|---|---|---|
|スコープ|プロジェクト直下|プロジェクト内（隠しフォルダ）|ユーザー全体|
|表示|通常見える|隠しファイル設定が必要|隠しファイル設定が必要|
|使用例|テスト用・簡易的な場合|プロジェクト固有の設定を分離したい場合|複数プロジェクト間でメモリを共有したい場合|
|独立性|最も低い|最も高い（プロジェクト独立）|中程度（ユーザー全体で共有）|

---

# 図で理解する：3つの配置場所と役割

```
あなたのPC（ユーザー：taka）
└─ ホームフォルダ  ~
   └─ .claude/                  ← 隠しフォルダ（個人の設定置き場）
      └─ CLAUDE.md              ← ★ 個人の既定メモリ（全プロジェクト共通）

プロジェクトA  ./（いま開いているリポジトリ）
├─ CLAUDE.md                    ← ★ 人向けの説明・方針（見える場所）
└─ .claude/                    ← 隠しフォルダ（プロジェクト設定の置き場）
   └─ CLAUDE.md                ← ★ このプロジェクト専用のメモリ

プロジェクトB  ./（別リポジトリ）
└─ .claude/
   └─ CLAUDE.md                ← ★ プロジェクトB専用のメモリ
```

---

## 用語メモ（前提）

- `./` は「今開いているプロジェクトのルート」を指します。
    
- `~` は「あなた個人のホームフォルダ」を指します（例：macOSなら `/Users/taka`）。
    
- 先頭がドットの名前（`.claude` など）は「隠しフォルダ」です。エクスプローラでは非表示のことがあります。
    

---

## 役割の違い（かみ砕いて）

- `./CLAUDE.md` は、リポジトリの入口に置く“読まれる前提のガイド”。GitHubで開いた人にもすぐ見えます。チームの方針・使い方・プロンプトの意図など「人間に読んでほしい説明」に向いています。
    
- `./.claude/CLAUDE.md` は、そのプロジェクトだけに効かせたい“機械が読む前提のメモリ”。リポジトリに含めて再現性を担保しつつ、設定系をルート直下から分離できます。
    
- `~/.claude/CLAUDE.md` は、あなた個人の“どのプロジェクトにも共通で効かせたい既定メモリ”。口調・基本ポリシー・よく使う定型など、個人プリセットに向いています（リポジトリ外なので他人に漏れにくい）。
    

※ どれが最優先で参照されるかはツールの実装やバージョンで変わる場合があります。一般的には「より近い場所（プロジェクト内）」が優先され、なければホームのグローバルに落ちる設計が多い、くらいの理解でOKです。

---

## 迷わない使い分けのコツ

プロジェクトで共有すべき“ふるまい”や“前提”は `./.claude/CLAUDE.md`。  
プロジェクトの読み物や案内板は `./CLAUDE.md`。  
自分だけの共通プリセットは `~/.claude/CLAUDE.md`。

この3分担にしておくと、後から見た自分やチームメンバーが迷いません。

---

## 1分でできる動作確認（優先度の把握）

1. 3つの場所それぞれに、違う合言葉を書きます（例：ROOT_ONLY／PROJECT_ONLY／GLOBAL_ONLY）。
    
2. プロジェクトを開いて、Claude Codeに「いま参照しているメモリの中に `PROJECT_ONLY` は見える？」のように尋ね、反応を確認します。
    
3. どれかを一時的にリネーム（`CLAUDE.md.bak` など）して、挙動の変化を比べます。
    

これであなたの環境での“実際の参照順”がすぐ把握できます。

---

## 初めての CLAUDE.md を作ってみよう

### /init コマンドで自動生成

Claude Code には便利な機能があります。

プロジェクトを分析して自動的に CLAUDE.md をプロジェクト内に作成してくれます。

以前もご紹介したコマンドですね。

```
> /init
```

このコマンドを実行すると、Claude Code がプロジェクト全体を調査し、現在の状態を反映してくれます。

そして、たとえば以下の内容を自動生成してくれます。

- 使用している技術スタック
- ディレクトリ構成
- 主要な機能の概要
- 検出されたコーディング規約

何度実行しても大丈夫なコマンドですので、大きく機能追加やフォルダ構成変更を行うたびに実行しましょう。

### グローバル設定の作成

全プロジェクトで使いたい共通ルールの設定方法を見ていきます。

ホームディレクトリに設定ファイルを作成しましょう。

```bash
# ディレクトリ作成（初回のみ）
mkdir -p ~/.claude

# エディタで開く
code ~/.claude/CLAUDE.md
```

たとえば、フロントエンド開発をよく行う場合は、以下のようなグローバル設定から始めてみるといいでしょう。

```markdown
# グローバル開発ルール

## 基本設定
- 常に日本語で返答してください
- エラーメッセージも日本語で説明してください

## コーディング規約
- テスト駆動開発（TDD）の手法で開発してください
- コミットメッセージは conventional commits 形式で書いてください
- 関数は単一責任の原則に従って小さく保ってください

## 技術的な制約
- TypeScript を使用する際は strict モードを有効にしてください
- CSS は Tailwind CSS を優先的に使用してください
```

## メモリファイルの効果的な使い方

### 更新のタイミング

CLAUDE.md は生きたドキュメントです。

プロジェクトの進化に合わせて更新することが大切です。

更新すべきタイミングをまとめました。

- 新しい技術スタックを導入したとき
- 大きく機能追加を行ったとき
- 重要な設計変更・フォルダ構成の変更をしたとき
- よくあるミスや注意点を発見したとき

これらのタイミングで更新を忘れないようにしましょう。

### おすすめの更新方法

場面に応じて、CLAUDE.md の更新方法をご紹介します。

- フォルダやファイルに大きな変更があったとき： `/init` コマンドで自動追記
- Claude Code での実装中に気付きがあたったとき： `xxxx について CLAUDE.md に追記して` と指示
- コーディング規約や開発ルールを変えたいとき：CLAUDE.md に直接追記

## トラブルシューティング

メモリファイルに関し、よくあるトラブルと解決方法をご紹介します。

### CLAUDE.md が反映されない

時々、CLAUDE.md を更新しても反映されないことがあります。

そんな時の対処法を紹介します。

**1\. セッションをリスタート**

```
> /exit
```

**2\. ファイルの場所を確認**

```bash
# 正しい場所にあるか確認
ls -la CLAUDE.md
ls -la .claude/CLAUDE.md
ls -la ~/.claude/CLAUDE.md
```

### メモリが大きくなりすぎた

CLAUDE.md が巨大になりすぎると問題が発生します。

毎回の読み込みでトークンを消費してしまうのです。

解決策を3つ紹介します。

- 本当に必要な情報だけを残す
- 詳細な実装は別ファイルに分離
- `/compact` コマンドで最適化を依頼

これらの方法でメモリサイズを適切に管理しましょう。

## まとめ

CLAUDE.md を使いこなすことで得られるメリットは大きいです。

今回学んだ重要なポイントを振り返りましょう。

- **3つのレベル** で優先順位がある
- **`/init`** で簡単に始められる
- **生きたドキュメント** として更新し続ける

次の Lesson では、より細かい制御ができる settings.json について学んでいきます。

