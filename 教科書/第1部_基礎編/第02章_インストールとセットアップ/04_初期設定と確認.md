# 初期設定と確認

## はじめに

Claude Codeのインストールと認証が完了したら、実際に使い始める前に初期設定を行い、正しく動作することを確認しましょう。この章では、/initコマンドを使ったプロジェクトの初期化、基本的な設定、そして動作確認の方法を詳しく解説します。

## 初回起動時の設定

### テーマの選択

Claude Codeを初めて起動すると、まずテーマ（表示スタイル）の選択画面が表示されます。

**起動コマンド**

```bash
claude
```

**テーマ選択画面**

```
╭──────────────────────────╮
│ ✻ Welcome to Claude Code │
╰──────────────────────────╯

Let's get started.

Choose the text style that looks best with your terminal:
To change this later, run /theme

❯ 1. Dark mode
  2. Light mode
  3. Dark mode (colorblind-friendly)
  4. Light mode (colorblind-friendly)
  5. Dark mode (ANSI colors only)
  6. Light mode (ANSI colors only)

Preview
╭──────────────────────────────────────────────────────────────╮
│   1   function greet() {                                     │
│   2 -    console.log("Hello, World!");                       │
│   2 +    console.log("Hello, Claude!");                      │
│   3   }                                                      │
╰──────────────────────────────────────────────────────────────╯
```

**選択肢の説明**

1. **Dark mode**: 黒背景（最も一般的）
2. **Light mode**: 白背景
3. **Dark mode (colorblind-friendly)**: 色覚サポート版（黒背景）
4. **Light mode (colorblind-friendly)**: 色覚サポート版（白背景）
5. **Dark mode (ANSI colors only)**: 互換性重視（黒背景）
6. **Light mode (ANSI colors only)**: 互換性重視（白背景）

**推奨**: ターミナルの背景が黒系なら「1. Dark mode」、白系なら「2. Light mode」

十字キー（↑↓）で選択し、Enterキーを押します。

**後から変更する方法**

テーマは後からいつでも変更できます:

```bash
> /theme
```

同じ選択画面が表示されます。

### セキュリティ注意事項の確認

テーマ選択後、セキュリティに関する注意事項が表示されます:

```
╭──────────────────────────────────────────────────────────────╮
│ Important Security Notice                                    │
│                                                              │
│ Claude Code is an AI assistant that can:                    │
│ - Read and modify files in your project                     │
│ - Execute commands in your terminal                         │
│ - Access the internet                                       │
│                                                              │
│ Please:                                                      │
│ - Review all changes before accepting                       │
│ - Never share sensitive information                         │
│ - Use appropriate permissions settings                      │
│                                                              │
│ Press Enter to continue                                     │
╰──────────────────────────────────────────────────────────────╯
```

内容を読んで、理解したらEnterキーを押します。

### ターミナル設定の最適化（オプション）

より快適に使うための設定を行えます:

```
Would you like to optimize your terminal for Claude Code?
This will enable Shift+Enter for line breaks.

❯ 1. Yes, set up now
  2. No, I'll do it later
  3. Skip this step
```

**推奨**: 「1. Yes, set up now」を選択

これにより、**Shift+Enter**で改行できるようになります（通常のEnterは送信）。

VS CodeのターミナルやiTerm2で特に便利です。

## プロジェクトの初期化 - /initコマンド

Claude Codeの最も重要な初期設定が、プロジェクトの初期化です。

### /initとは

`/init`コマンドは、現在のプロジェクトを分析して**CLAUDE.md**ファイルを生成します。

**CLAUDE.mdの役割**
- プロジェクトの構造を記録
- 使用技術スタックを把握
- コーディング規約を保存
- よく使うコマンドを記憶

一度生成すれば、その後のセッションでClaude Codeがプロジェクトの文脈を理解した状態で作業できます。

### 新規プロジェクトでの/init

**空のプロジェクトフォルダを作成**

```bash
# ホームディレクトリに移動
cd ~

# プロジェクトフォルダを作成
mkdir my-first-project
cd my-first-project

# Claude Codeを起動
claude
```

**初回の/init実行**

```bash
> /init
```

Claude Codeがプロジェクトを分析します:

```
Analyzing project structure...
Creating CLAUDE.md...

I've initialized this project. Since this is a new/empty project,
I've created a basic CLAUDE.md file. As you add files and code,
run /init again to update the project context.

CLAUDE.md has been created at: /Users/username/my-first-project/CLAUDE.md
```

**生成されたCLAUDE.md（例）**

```markdown
# my-first-project

This is a new project initialized with Claude Code.

## Project Structure

Currently empty. Run /init after adding files to update this section.

## Technologies

To be determined based on project content.

## Coding Guidelines

- To be defined as the project grows

## Common Commands

- To be added based on project needs
```

### 既存プロジェクトでの/init

**例: Reactプロジェクト**

既存のReactプロジェクトで実行してみましょう:

```bash
# Reactプロジェクトに移動（例）
cd ~/projects/my-react-app

# Claude Codeを起動
claude
```

**/initを実行**

```bash
> /init
```

Claude Codeが既存のファイルを分析します:

```
Analyzing project structure...
Reading package.json...
Detecting framework: React 18.2.0
Analyzing components...
Checking build configuration...

Creating comprehensive CLAUDE.md...
Done!
```

**生成されたCLAUDE.md（例）**

```markdown
# my-react-app

A React application built with Create React App.

## Project Structure

```
my-react-app/
├── public/
│   └── index.html
├── src/
│   ├── components/
│   │   ├── Header.jsx
│   │   └── Footer.jsx
│   ├── App.jsx
│   ├── index.js
│   └── index.css
├── package.json
└── README.md
```

## Technologies

- **Frontend**: React 18.2.0
- **Build Tool**: Create React App (react-scripts 5.0.1)
- **Styling**: CSS Modules
- **State Management**: React Hooks

## Coding Guidelines

- Use functional components with hooks
- Follow ESLint configuration
- Component files use `.jsx` extension
- CSS files are co-located with components

## Common Commands

```bash
npm start         # Start development server
npm test          # Run tests
npm run build     # Build for production
npm run eject     # Eject from CRA (use with caution)
```

## Architecture Notes

- Component structure follows atomic design principles
- Shared components in `src/components/`
- Each feature has its own directory
```

### /initの活用シーン

**1. プロジェクト開始時**

新しいプロジェクトを始めるとき、最初に実行。

**2. 大きな変更後**

- 技術スタックを変更したとき
- ディレクトリ構造を変更したとき
- 新しい主要機能を追加したとき

**3. チームメンバーの追加時**

新しいメンバーがプロジェクトに参加したら、/initでCLAUDE.mdを更新。

**何度実行してもOK**

/initは何度実行しても問題ありません。プロジェクトの成長に合わせて更新していきましょう。

## 動作確認

### 基本的な動作確認

**1. 簡単なコマンドの実行**

```bash
> Helloと表示するJavaScriptファイルを作成してください
```

Claude Codeが応答し、ファイルを作成します:

```
I'll create a simple JavaScript file that displays "Hello".

[File created: hello.js]

```javascript
console.log("Hello");
```

Would you like me to run this file?
```

**2. ファイルが作成されたか確認**

別のターミナルウィンドウ、またはエディタで確認:

```bash
ls -la
# hello.js が存在することを確認
```

**3. コードの実行**

```bash
> このファイルを実行してください
```

```
Running: node hello.js

Output:
Hello

The file executed successfully.
```

**これで基本的な動作が確認できました！**

### /helpで機能確認

利用可能なコマンドを確認します:

```bash
> /help
```

以下のような一覧が表示されます:

```
Available commands:

Project Management:
  /init          - Initialize or update project context
  /clear         - Clear conversation history
  /compact       - Compress conversation to save tokens

Settings:
  /config        - View and modify settings
  /theme         - Change display theme
  /model         - Select AI model (Opus/Sonnet)
  /permissions   - Manage tool permissions

Information:
  /help          - Show this help message
  /status        - Show current session status
  /doctor        - Check installation health

Session:
  /exit          - Exit Claude Code
```

### /statusで現在の状態確認

```bash
> /status
```

現在のセッション情報が表示されます:

```
╭─────────────────────────────────────────────────────────╮
│ Session Status                                          │
├─────────────────────────────────────────────────────────┤
│ Model:          Default (Auto-select)                   │
│ Working Dir:    /Users/username/my-first-project        │
│ CLAUDE.md:      Found                                   │
│ Messages:       5                                       │
│ Total Tokens:   1,234                                   │
│ Authentication: Claude App (Pro)                        │
╰─────────────────────────────────────────────────────────╯
```

**確認項目**
- **Model**: 使用中のAIモデル
- **Working Dir**: 作業ディレクトリ
- **CLAUDE.md**: CLAUDE.mdの有無
- **Messages**: 会話のメッセージ数
- **Total Tokens**: 使用トークン数
- **Authentication**: 認証方法

### /doctorで健全性チェック

環境が正しく設定されているか診断します:

```bash
> /doctor
```

```
Running diagnostics...

✓ Node.js version: v22.5.1 (OK)
✓ npm version: 10.2.4 (OK)
✓ Claude Code version: 1.0.67 (latest)
✓ Authentication: Valid
✓ Network connection: OK
✓ API access: OK
✓ Working directory: Writable

All checks passed! Claude Code is ready to use.
```

問題がある場合は、具体的なエラーメッセージと解決方法が表示されます。

## 推奨設定

### ターミナルの改行設定

長いプロンプトを入力する際、改行が必要です。

**現在の設定を確認**

複数行のメッセージを入力してみます:

```bash
> 以下の機能を実装してください:
# ここでEnterを押すと送信されてしまう？
```

**Shift+Enterで改行する設定**

まだ設定していない場合:

```bash
> /terminal-setup
```

自動的にターミナル設定が最適化されます（VS Code、iTerm2など）。

### モデルの選択

デフォルトでは「Default」（自動選択）ですが、変更できます:

```bash
> /model
```

```
Select a model:

❯ 1. Default (Auto-select based on usage)
  2. Opus (Highest quality, slower, more expensive)
  3. Sonnet (Balanced quality and speed)
```

**推奨**: 最初は「Default」のまま使い、必要に応じて変更。

**使い分け**
- **Default**: 自動で最適化（推奨）
- **Opus**: 複雑なタスク、高品質が必要なとき
- **Sonnet**: 日常的な作業、コスト重視

### 権限設定の確認

どの操作を自動承認するか設定できます:

```bash
> /permissions
```

```
Current permissions:

Auto-approve:
  - None

Auto-deny:
  - None

Would you like to modify permissions?
❯ 1. Yes, configure now
  2. No, keep current settings
```

**初心者の場合**

最初は「2. No, keep current settings」を選択し、都度確認する設定がおすすめです。

慣れてきたら、よく使うコマンドを自動承認に追加できます。

詳細は後の章で解説します。

## CLAUDE.mdのカスタマイズ

生成されたCLAUDE.mdは、手動で編集・拡張できます。

### チーム固有のルールを追加

```markdown
## Coding Guidelines

- Use functional components with hooks
- Follow ESLint configuration
- Component files use `.jsx` extension
- CSS files are co-located with components

### Team-specific rules
- All components must have PropTypes
- Use `data-testid` for testing
- Error boundaries required for all pages
- Console logs must be removed before commit
```

### よく使うコマンドを追加

```markdown
## Common Commands

```bash
npm start              # Start development server
npm test               # Run tests
npm run build          # Build for production
npm run lint           # Run linter
npm run lint:fix       # Auto-fix linting errors
npm run type-check     # Run TypeScript type checking
```
```

### プロジェクト固有の情報を追加

```markdown
## Environment Variables

Required `.env` variables:
- `REACT_APP_API_URL`: Backend API endpoint
- `REACT_APP_GA_ID`: Google Analytics ID

## Deployment

- Staging: Deployed on merge to `develop` branch
- Production: Deployed on merge to `main` branch
- URL: https://myapp.example.com
```

Claude Codeは次回起動時に、追加した情報も読み込みます。

## トラブルシューティング

### CLAUDE.mdが生成されない

**原因**: 権限の問題、またはディレクトリが書き込み禁止

**解決方法**

1. ディレクトリの権限を確認:
   ```bash
   ls -la
   ```

2. 書き込み権限を追加:
   ```bash
   chmod u+w .
   ```

3. 再度/initを実行:
   ```bash
   > /init
   ```

### /helpが表示されない

**原因**: ネットワーク接続の問題

**解決方法**

1. インターネット接続を確認
2. プロキシ設定を確認（企業ネットワークの場合）
3. Claude Codeを再起動

### テーマが見にくい

**解決方法**

```bash
> /theme
```

別のテーマを選択。ターミナルの配色に合わせて調整してください。

### コマンドの実行に時間がかかる

**原因**: ネットワーク速度、またはモデルの選択

**解決方法**

1. Sonnetモデルに切り替え（より高速）:
   ```bash
   > /model
   # Sonnetを選択
   ```

2. /compactで会話を圧縮:
   ```bash
   > /compact
   ```

## まとめ

Claude Codeの初期設定:

**必須の設定**
- テーマの選択
- 認証の完了
- /initでプロジェクト初期化

**推奨の設定**
- ターミナルの改行設定（/terminal-setup）
- CLAUDE.mdのカスタマイズ
- モデル選択の理解

**動作確認**
- 簡単なファイル作成テスト
- /helpでコマンド確認
- /statusで状態確認
- /doctorで健全性チェック

これで、Claude Codeを使い始める準備が整いました！

次章では、よくあるエラーとその解決方法について詳しく解説します。
