# 起動方法とコマンド

## はじめに

Claude Codeを効果的に使うには、さまざまな起動オプションとコマンドを理解することが重要です。この章では、基本的な起動方法から、作業効率を大幅に向上させる応用的なコマンドまで、実践的な使い方を詳しく解説します。

## 基本の起動方法

### claude - 通常の対話モード

最もシンプルで基本的な起動方法です。

**コマンド**

```bash
claude
```

**動作**
- 新しいセッションが開始される
- 現在のディレクトリを作業ディレクトリとして使用
- CLAUDE.mdがあれば自動的に読み込む

**使用例**

```bash
$ cd ~/projects/my-app
$ claude

╭────────────────────────────────────────────────────────────────╮
│ ✻ Welcome to Claude Code!                                      │
│                                                                │
│   /help for help, /status for your current setup              │
│                                                                │
│   cwd: /Users/username/projects/my-app                        │
╰────────────────────────────────────────────────────────────────╯

╭────────────────────────────────────────────────────────────────╮
│ > Try "create a util logging.py that..."                      │
╰────────────────────────────────────────────────────────────────╯
  ? for shortcuts
```

**向いている場面**
- 新しいタスクを始めるとき
- 前回のセッションと無関係な作業をするとき
- プロジェクトを切り替えたとき

### claude --continue - 直前のセッションを継続

前回の作業の続きをすぐに始められます。

**コマンド**

```bash
claude --continue
```

**短縮形**

```bash
claude -c
```

**動作**
- 最新のセッション（最後に終了したセッション）を復元
- 会話履歴が保持される
- 前回の作業ディレクトリで開始

**使用例**

```bash
# 昨日の作業の続きから
$ claude --continue

╭────────────────────────────────────────────────────────────────╮
│ ✻ Resuming session from 12 hours ago                          │
│   Last message: "テストが全て通りました！"                        │
╰────────────────────────────────────────────────────────────────╯

╭────────────────────────────────────────────────────────────────╮
│ > 続きから始めましょう                                           │
╰────────────────────────────────────────────────────────────────╯
```

**向いている場面**
- 休憩から戻ってきたとき
- 前日の作業の続きをするとき
- エラーで一度終了してしまったとき
- コンテキストを保持したまま再開したいとき

**注意点**
- セッションが存在しない場合は、通常の起動になります
- 長期間経過したセッションは情報が古い可能性があります

### claude --resume - 過去のセッションから選択

複数の過去セッションから選んで再開できます。

**コマンド**

```bash
claude --resume
```

**短縮形**

```bash
claude -r
```

**動作**
- 過去のセッション一覧が表示される
- 選択したセッションを復元
- 会話履歴、設定、コンテキストが保持される

**使用例**

```bash
$ claude --resume

    Modified    Created     # Messages Git Branch     Summary
❯ 1. 1m ago      12m ago              8 -              Simple HTML File Creation Assistance
  2. 31m ago     35m ago              5 -              Tailwind CSS Layout Design from Japanese Image
  3. 2h ago      3h ago              15 main           User Authentication Implementation
  4. 1d ago      1d ago              42 feature/api    REST API Development
  5. 3d ago      3d ago              23 develop        Bug Fix: Pagination Issue

  (Use arrow keys to navigate, Enter to select, Esc to cancel)
```

**表示される情報**
- **Modified**: 最後に更新した時刻
- **Created**: セッション作成時刻
- **# Messages**: 会話のメッセージ数
- **Git Branch**: セッション開始時のGitブランチ
- **Summary**: セッションの内容（自動生成）

**操作方法**
- **十字キー（↑↓）**: 選択を移動
- **Enter**: 選択したセッションを再開
- **Esc**: キャンセルして通常起動

**向いている場面**
- 複数のタスクを並行して進めているとき
- 過去の特定の作業に戻りたいとき
- 「あの時の設定どうだったっけ？」と確認したいとき

## ダイレクトプロンプトモード

### claude -p - 質問を直接投げる

対話モードに入らず、一度だけ質問して結果を得ます。

**コマンド**

```bash
claude -p "質問内容"
```

**長い形式**

```bash
claude --prompt "質問内容"
```

**使用例1: ファイルの説明**

```bash
$ claude -p "package.json の内容を説明して"

# 即座に回答が表示される
This package.json defines a React project with:

Dependencies:
- react: 18.2.0 (UI library)
- react-dom: 18.2.0 (React DOM renderer)
- axios: 1.4.0 (HTTP client)

DevDependencies:
- @types/react: 18.2.15 (TypeScript definitions)
- vite: 4.4.5 (Build tool)
- eslint: 8.45.0 (Linter)

Scripts:
- dev: Start development server
- build: Build for production
- preview: Preview production build
```

**使用例2: 簡単なコード生成**

```bash
$ claude -p "配列をソートする関数をJavaScriptで作って"

function sortArray(arr, order = 'asc') {
  return [...arr].sort((a, b) => {
    return order === 'asc' ? a - b : b - a;
  });
}

// 使用例
const numbers = [5, 2, 8, 1, 9];
console.log(sortArray(numbers));        // [1, 2, 5, 8, 9]
console.log(sortArray(numbers, 'desc')); // [9, 8, 5, 2, 1]
```

**向いている場面**
- 素早く情報を得たいとき
- スクリプトから Claude Code を呼び出すとき
- 簡単な質問だけで対話が不要なとき

**制限事項**
- ファイル編集など、許可が必要な操作は実行できない（許可設定が必要）
- 複雑なタスクには向かない
- 会話履歴は保存されない

## 起動オプションの組み合わせ

### モデル指定付き起動

特定のモデルで起動したい場合:

```bash
# Opusモデルで起動（高品質）
claude --model opus

# Sonnetモデルで起動（高速・コスト重視）
claude --model sonnet
```

### 作業ディレクトリ指定

異なるディレクトリで起動:

```bash
# 特定のディレクトリで起動
claude --cwd /path/to/project

# または
cd /path/to/project && claude
```

### 複数オプションの組み合わせ

```bash
# 直前のセッションをOpusモデルで継続
claude --continue --model opus

# 特定ディレクトリでプロンプトモード
claude --cwd ~/projects/app -p "package.jsonを説明して"
```

## 危険なオプション（上級者向け）

### claude --dangerously-skip-permissions

**警告**: このオプションは非常に危険です。

**コマンド**

```bash
claude --dangerously-skip-permissions
```

**動作**
- 全ての権限確認をスキップ
- ファイル編集、コマンド実行を全て自動承認
- 人間の確認なしで実行される

**危険性**

```bash
# 以下のような危険なコマンドも確認なしで実行される可能性
rm -rf /  # 全ファイル削除
git push --force  # 強制プッシュ
npm install malicious-package  # 悪意のあるパッケージ
```

**使用が許容される場面（非常に限定的）**
- Dockerコンテナ内での実験
- 完全に隔離されたテスト環境
- 自動化スクリプトで、全てのリスクを理解している場合

**絶対に使ってはいけない場面**
- 本番環境
- 重要なデータがあるマシン
- 会社の開発マシン
- 初心者の学習時

**より安全な代替案**

`.claude/settings.json`で特定の安全なコマンドだけ自動承認:

```json
{
  "permissions": {
    "allow": [
      "Bash(npm test)",
      "Bash(npm run build)",
      "Read(src/**/*)"
    ]
  }
}
```

## アップデート関連コマンド

### claude update - アップデート確認と実行

**コマンド**

```bash
claude update
```

**動作**
1. 最新バージョンを確認
2. 現在のバージョンと比較
3. 新しいバージョンがあればインストール

**使用例**

```bash
$ claude update

Current version: 1.0.67
Checking for updates...
New version available: 1.0.70

Changes in 1.0.70:
- Improved performance for large files
- Fixed bug in /compact command
- Added support for new image formats

Do you want to update? (y/n): y

Updating...
✓ Successfully updated to 1.0.70
```

**手動アップデート**

```bash
npm update -g @anthropic-ai/claude-code
```

### claude --version - バージョン確認

```bash
$ claude --version
1.0.67 (Claude Code)
```

または

```bash
$ claude -v
1.0.67 (Claude Code)
```

## セッション管理のベストプラクティス

### パターン1: 日常的な開発

```bash
# 朝: 昨日の続きから
claude --continue

# 昼: 別のタスク
claude  # 新規セッション

# 夕方: 朝のタスクに戻る
claude --resume  # 朝のセッションを選択
```

### パターン2: 複数プロジェクトの並行作業

```bash
# プロジェクトA
cd ~/projects/project-a
claude
# 作業...

# プロジェクトB
cd ~/projects/project-b
claude
# 作業...

# プロジェクトAに戻る
cd ~/projects/project-a
claude --continue
# 続きから再開
```

### パターン3: クイックな質問

```bash
# 対話モードに入らず素早く確認
claude -p "この関数のバグを見つけて" < function.js

# 説明だけ欲しいとき
claude -p "RESTとGraphQLの違いを教えて"
```

## エイリアスの設定（時短テクニック）

頻繁に使うコマンドは短縮形を設定すると便利です。

### bashの場合

`~/.bashrc`に追加:

```bash
# Claude Code エイリアス
alias cc="claude"
alias ccc="claude --continue"
alias ccr="claude --resume"
alias ccp="claude -p"
alias ccu="claude update"
```

設定を反映:

```bash
source ~/.bashrc
```

### zshの場合

`~/.zshrc`に追加:

```bash
# Claude Code エイリアス
alias cc="claude"
alias ccc="claude --continue"
alias ccr="claude --resume"
alias ccp="claude -p"
alias ccu="claude update"
```

設定を反映:

```bash
source ~/.zshrc
```

### PowerShellの場合

`$PROFILE`に追加:

```powershell
# Claude Code エイリアス
function cc { claude $args }
function ccc { claude --continue $args }
function ccr { claude --resume $args }
function ccp { claude -p $args }
function ccu { claude update }
```

### 使用例

```bash
# 通常は
$ claude --continue

# エイリアス設定後は
$ ccc

# プロンプトモードも短く
$ ccp "この関数を説明して"
```

## 起動時の自動実行（上級者向け）

特定のコマンドを自動実行したい場合:

```bash
# CLAUDE.md を確認してから起動
cat CLAUDE.md && claude

# Gitの状態を確認してから起動
git status && claude

# 最新のコミットログを表示してから起動
git log -1 && claude
```

これをエイリアスにすることもできます:

```bash
alias ccs="git status && claude"
```

## まとめ

Claude Codeの主な起動方法:

**基本**
- `claude`: 新規セッション
- `claude --continue` (`-c`): 直前のセッション継続
- `claude --resume` (`-r`): 過去のセッションから選択

**応用**
- `claude -p "質問"`: ダイレクトプロンプト
- `claude --model opus/sonnet`: モデル指定
- `claude update`: アップデート

**危険（注意）**
- `claude --dangerously-skip-permissions`: 権限確認スキップ

**推奨される使い分け**
- 新しいタスク: `claude`
- 続きから: `claude --continue`
- 過去のタスクに戻る: `claude --resume`
- 素早い確認: `claude -p`

エイリアスを設定して、さらに効率的に使いましょう！

次章では、インタラクティブモード内での具体的な操作方法を学びます。
