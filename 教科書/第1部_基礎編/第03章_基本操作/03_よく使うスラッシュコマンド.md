# よく使うスラッシュコマンド

## はじめに

スラッシュコマンドは、Claude Codeの機能を制御するための特別なコマンドです。`/`で始まり、セッション管理、設定変更、情報確認など、さまざまな機能にアクセスできます。この章では、実務で頻繁に使うコマンドを中心に、実践的な使い方を詳しく解説します。

## プロジェクト管理コマンド

### /init - プロジェクトの初期化

**最も重要なコマンドの一つ**です。

**機能**
- プロジェクト全体を分析
- CLAUDE.mdファイルを生成・更新
- 技術スタック、構造、規約を記録

**使い方**

```bash
> /init
```

**実行時の動作**

```
Analyzing project structure...
Reading package.json...
Detecting framework: React 18.2.0
Analyzing components in src/...
Checking build configuration...
Reading existing CLAUDE.md...

Updating CLAUDE.md with current project state...
✓ Done!

CLAUDE.md has been updated with:
- 15 source files analyzed
- 3 new dependencies detected
- Updated architecture notes
```

**いつ使うか**

1. **プロジェクト開始時（最初の1回）**
   ```bash
   $ cd new-project
   $ claude
   > /init
   ```

2. **大きな変更後**
   ```bash
   # TypeScriptに移行した後
   > /init

   # 新しいフレームワークを導入した後
   > /init

   # ディレクトリ構造を大幅に変更した後
   > /init
   ```

3. **定期的なメンテナンス（月1回程度）**
   ```bash
   > /init
   # プロジェクトの現状を最新の状態に保つ
   ```

**Tips**
- `/init`は何度実行してもOK
- 実行前にGitでコミットしておくと安全
- 既存のCLAUDE.mdは上書きされるので、カスタマイズ部分は別途保存

### /clear - 会話履歴をクリア

**使用頻度: 非常に高い**

**機能**
- 現在の会話履歴を完全にリセット
- コンテキストウィンドウを空にする
- CLAUDE.mdの内容は保持される

**使い方**

```bash
> /clear
```

**実行後**

```
Conversation cleared.

╭────────────────────────────────────────────────────────────────╮
│ >                                                              │
╰────────────────────────────────────────────────────────────────╯

# 新しい会話として開始
```

**いつ使うか**

1. **タスクが変わったとき**
   ```bash
   # 認証機能の実装が完了
   > /clear
   # 次: ダッシュボードの実装
   ```

2. **Claude Codeが混乱しているとき**
   ```bash
   # 的外れな提案が続く
   > /clear
   # クリアして、もう一度明確に指示
   ```

3. **会話が長くなりすぎたとき**
   ```bash
   # 100メッセージ以上の会話
   > /clear
   # トークン節約と精度向上
   ```

**注意点**
- クリア後は前の会話の内容を覚えていません
- 重要な決定事項は別途メモしておく
- CLAUDE.mdに記録されていない情報は失われます

**代替: /compact（次項）**

### /compact - 会話を要約してトークン節約

**/clearの軽量版**

**機能**
- 会話を要約して圧縮
- 重要な情報は保持
- トークン使用量を削減

**使い方**

```bash
> /compact
```

**実行時の動作**

```
Compressing conversation...
Analyzing 45 messages...
Creating summary...

✓ Compressed!

Before: 45 messages, ~15,000 tokens
After:  5 messages, ~2,500 tokens
Saved: ~12,500 tokens

The following information has been preserved:
- Current task: Implementing user authentication
- Key decisions: Using JWT, bcrypt for passwords
- File changes: 5 files modified
- Next steps: Test the login endpoint
```

**いつ使うか**

1. **会話が長いが、コンテキストは保持したいとき**
   ```bash
   # 50メッセージの会話
   > /compact
   # 重要な情報を保持したまま圧縮
   ```

2. **トークン制限警告が出たとき**
   ```bash
   ⚠ Approaching token limit...

   > /compact
   ```

3. **定期的なメンテナンス（20-30メッセージごと）**
   ```bash
   > /compact
   ```

**/clearとの使い分け**

| 状況 | 推奨コマンド |
|------|------------|
| 全く別のタスクに移る | `/clear` |
| 同じタスクの続き | `/compact` |
| コンテキストを保持したい | `/compact` |
| 完全にリセットしたい | `/clear` |
| トークン節約だけしたい | `/compact` |

## 設定・情報コマンド

### /help - ヘルプとコマンド一覧

**機能**
- 全スラッシュコマンドの一覧
- 各コマンドの簡単な説明

**使い方**

```bash
> /help
```

**表示内容**

```
Available commands:

Project Management:
  /init          - Initialize or update project context
  /clear         - Clear conversation history
  /compact       - Compress conversation to save tokens

Settings:
  /config        - View and modify settings
  /theme         - Change display theme
  /model         - Select AI model (Opus/Sonnet)
  /permissions   - Manage tool permissions

Information:
  /help          - Show this help message
  /status        - Show current session status
  /doctor        - Check installation health

Session:
  /exit          - Exit Claude Code

For detailed help on a command, type /help <command>
```

**特定のコマンドのヘルプ**

```bash
> /help init

/init - Initialize or update project context

Usage: /init

Analyzes your project and creates or updates CLAUDE.md with:
- Project structure and architecture
- Technology stack and dependencies
- Coding guidelines and conventions
- Common commands

Run this:
- When starting a new project
- After major changes to project structure
- Periodically to keep context up to date
```

### /status - 現在のセッション状態

**機能**
- 現在のセッション情報を表示
- モデル、トークン使用量、設定など

**使い方**

```bash
> /status
```

**表示内容**

```
╭─────────────────────────────────────────────────────────╮
│ Session Status                                          │
├─────────────────────────────────────────────────────────┤
│ Model:          Default (Auto-select)                   │
│ Current:        Claude Opus 4                           │
│ Working Dir:    /Users/username/projects/my-app         │
│ CLAUDE.md:      Found (last updated 2 hours ago)        │
│ Messages:       23                                      │
│ Total Tokens:   12,456 (input: 8,234 / output: 4,222)  │
│ Authentication: Claude App (Pro)                        │
│ Auto-accept:    Off                                     │
│ Plan mode:      Off                                     │
╰─────────────────────────────────────────────────────────╯
```

**いつ確認するか**

- トークン使用量を確認したいとき
- どのモデルを使っているか確認したいとき
- 設定を確認したいとき

### /config - 設定の表示・変更

**機能**
- Claude Codeの設定を対話的に変更

**使い方**

```bash
> /config
```

**表示内容**

```
Current Configuration:

1. Theme: Dark mode
2. Auto-accept edits: Off
3. Default model: Default (Auto-select)
4. Editor integration: VS Code
5. Notifications: Terminal bell

Select a setting to change (1-5), or press Enter to cancel:
```

**設定の変更例**

```bash
> /config
# 1 を選択
Select a setting to change: 1

Choose theme:
❯ 1. Dark mode
  2. Light mode
  3. Dark mode (colorblind-friendly)
  4. Light mode (colorblind-friendly)

# 選択して Enter
```

### /theme - テーマの変更

**機能**
- 表示テーマの変更（専用コマンド）

**使い方**

```bash
> /theme
```

これは`/config`でテーマ設定を選ぶのと同じ動作です。

### /model - AIモデルの選択

**重要なコマンド**

**機能**
- 使用するAIモデルを切り替え

**使い方**

```bash
> /model
```

**選択肢**

```
Select a model:

❯ 1. Default (Auto-select based on usage)
  2. Opus (Highest quality, slower, more expensive)
  3. Sonnet (Balanced quality and speed)
```

**各モデルの特徴**

**1. Default（推奨）**
- 使用量に応じて自動切り替え
- 上限の50%まで: Opus
- 50%以降: Sonnet
- バランスが良い

**2. Opus**
- 最高品質
- 複雑な推論が得意
- トークン使用量が多い
- コストが高い

**3. Sonnet**
- 高速
- コストが安い（Opusの1/5）
- 通常のタスクには十分

**使い分けの実例**

```bash
# 大規模リファクタリング → Opus
> /model
# Opus を選択
> プロジェクト全体をTypeScriptに移行してください

# 日常的なコーディング → Sonnet
> /model
# Sonnet を選択
> README.mdを更新してください

# 自動選択に戻す → Default
> /model
# Default を選択
```

## 権限管理コマンド

### /permissions - 権限設定の管理

**上級者向けの重要コマンド**

**機能**
- ファイル編集、コマンド実行の権限を管理
- 自動承認・自動拒否の設定

**使い方**

```bash
> /permissions
```

**表示内容**

```
Current Permissions:

Auto-approve (always allowed):
  - Bash(npm test)
  - Bash(npm run build)
  - Read(src/**/*.js)

Auto-deny (always blocked):
  - Bash(rm -rf *)
  - Bash(git push --force)
  - Write(.env*)

All other operations will prompt for confirmation.

Options:
  1. Add auto-approve rule
  2. Add auto-deny rule
  3. Remove a rule
  4. Reset to defaults
  5. Done

Select an option:
```

**設定例: テストを自動承認**

```bash
> /permissions
# 1 を選択

Enter the operation pattern to auto-approve:
> Bash(npm test)

✓ Added to auto-approve list.

Now 'npm test' will run without confirmation.
```

**パターンの書き方**

```
Bash(<command>)     - Bashコマンド
Read(<path>)        - ファイル読み込み
Write(<path>)       - ファイル書き込み
Edit(<path>)        - ファイル編集
```

**ワイルドカード使用例**

```
Bash(npm *)         - npm で始まる全てのコマンド
Read(src/**/*.ts)   - src配下の全TypeScriptファイル読み込み
Write(*.test.js)    - 全テストファイルの書き込み
Edit(docs/**)       - docs配下の全ファイル編集
```

**推奨設定例**

```json
{
  "permissions": {
    "allow": [
      "Bash(npm test)",
      "Bash(npm run build)",
      "Bash(npm run lint)",
      "Read(src/**/*)",
      "Read(public/**/*)"
    ],
    "deny": [
      "Bash(rm -rf *)",
      "Bash(sudo *)",
      "Bash(git push --force)",
      "Write(.env*)",
      "Write(config/production.*)"
    ]
  }
}
```

## 診断コマンド

### /doctor - 健全性チェック

**機能**
- 環境の問題を診断
- 解決方法を提示

**使い方**

```bash
> /doctor
```

**実行内容**

```
Running diagnostics...

✓ Node.js version: v22.5.1 (OK)
✓ npm version: 10.2.4 (OK)
✓ Claude Code version: 1.0.67 (latest)
✓ Authentication: Valid (expires in 28 days)
✓ Network connection: OK (52ms ping)
✓ API access: OK
✓ Working directory: Writable
✓ CLAUDE.md: Found and readable
✓ Git repository: Initialized
✓ .gitignore: Properly configured

All checks passed! Claude Code is ready to use.
```

**問題がある場合**

```
Running diagnostics...

✓ Node.js version: v22.5.1 (OK)
✓ npm version: 10.2.4 (OK)
✗ Claude Code version: 1.0.60 (outdated, latest is 1.0.67)
  → Fix: Run 'claude update' to upgrade
✗ Authentication: Expired
  → Fix: Restart Claude Code to re-authenticate
✓ Network connection: OK
✗ API access: Failed (Error 403)
  → Fix: Check your API key or subscription status

2 issues found. Please address them for optimal performance.
```

**いつ使うか**
- 問題が発生したとき
- セットアップ後の確認
- しばらく使っていなかった後

## セッション管理コマンド

### /exit - Claude Codeを終了

**機能**
- 現在のセッションを終了

**使い方**

```bash
> /exit
```

**Ctrl+C × 2と同じ**

```
Goodbye!
$
```

## その他の便利なコマンド

### /review - コードレビュー

**機能**
- 変更内容をレビュー
- PRのレビューも可能

**使い方**

```bash
# 現在の変更をレビュー
> /review

# 特定のPRをレビュー
> /review 123
# GitHub PR #123 をレビュー
```

### /terminal-setup - ターミナル最適化

**機能**
- Shift+Enterで改行できるように設定

**使い方**

```bash
> /terminal-setup
```

VS CodeやiTerm2で特に便利です。

## コマンドの組み合わせパターン

### パターン1: 新規タスク開始

```bash
> /clear
> /model
# Opus を選択
> 新しい機能を実装してください
```

### パターン2: 定期的なメンテナンス

```bash
> /init
> /compact
> /doctor
```

### パターン3: トラブルシューティング

```bash
> /doctor
> /status
> /clear
# 再度試す
```

### パターン4: 作業効率化

```bash
> /permissions
# よく使うコマンドを自動承認

> /model
# Sonnet に切り替え（高速化）

# 作業開始
```

## スラッシュコマンドのTips

### Tip 1: タブ補完

多くのターミナルでは、タブキーでコマンドを補完できます:

```bash
> /in[Tab]
> /init
```

### Tip 2: コマンドの省略形

一部のコマンドには短縮形があります:

```bash
/h    → /help
/c    → /clear
/s    → /status
```

### Tip 3: コマンドのヘルプ

```bash
> /help <command>
> /help init
```

### Tip 4: 連続実行

```bash
> /compact
> /status
# 2つのコマンドを順番に実行
```

## まとめ

頻繁に使うスラッシュコマンド:

**必須**
- `/init`: プロジェクト初期化（最初に1回）
- `/clear`: タスク切り替え時（毎日数回）
- `/compact`: 会話が長くなったら（1日1-2回）
- `/help`: 困ったとき

**重要**
- `/status`: 状態確認
- `/model`: モデル切り替え
- `/permissions`: 権限設定

**便利**
- `/doctor`: 問題診断
- `/config`: 設定変更
- `/theme`: テーマ変更

**作業フロー例**

```
朝:
  claude --continue
  > /status  # 確認

昼:
  > /compact  # 圧縮

タスク切り替え:
  > /clear  # リセット

週1回:
  > /init  # プロジェクト更新
  > /doctor  # 健全性チェック
```

次章では、モデルの選択と切り替えについて、さらに詳しく学びます。
